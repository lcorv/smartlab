<h2 mat-dialog-title>Modifica {{avviso.titolo}}</h2>
<mat-dialog-content>
    <h2 class="text-center mb-4">Modifica Avviso</h2>
    <form *ngIf="formData" [formGroup]="formData" (ngSubmit)="onSubmit()">
        <!-- Nome -->
        <mat-form-field class="w-100 mb-3" appearance="outline">
            <mat-label>Titolo</mat-label>
            <input matInput type="text" formControlName="titolo" required />
        </mat-form-field>

        <!-- Tipo -->
        <mat-form-field class="w-100 mb-3" appearance="outline">
            <mat-label>Tipo</mat-label>
            <mat-select formControlName="tipo" required>
                <mat-option *ngFor="let tipo of tipoAvvisi" [value]="tipo">
                    {{ tipo }}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <!-- Descrizione breve -->
        <mat-form-field class="w-100 mb-3" appearance="outline">
            <mat-label>Testo</mat-label>
            <textarea matInput rows="4" formControlName="testo"></textarea>
        </mat-form-field>

        <!-- Descrizione -->
        <mat-form-field class="w-100 mb-3" appearance="outline">
            <mat-label>Descrizione</mat-label>
            <textarea matInput rows="2" formControlName="descrizione"></textarea>
        </mat-form-field>

        <!-- Data inizio-->
        <mat-form-field>
            <mat-label>Data d'inizio e di fine</mat-label>
            <mat-date-range-input [formGroup]="formData" [rangePicker]="picker">
                <input matStartDate formControlName="data_inizio" placeholder="Data inizio">
                <input matEndDate formControlName="data_fine" placeholder="Data fine">
            </mat-date-range-input>
            <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>

            @if (formData.controls['data_inizio'].hasError('matStartDateInvalid')) {
            <mat-error>Data di inizio non valida</mat-error>
            }
            @if (formData.controls['data_fine'].hasError('matEndDateInvalid')) {
            <mat-error>Data di fine non valida</mat-error>
            }
        </mat-form-field>

        <!-- Pulsanti -->
        <div class="d-flex justify-content-between mt-4">
            <button mat-raised-button color="primary" type="submit" [disabled]="!formData.valid">Salva</button>
            <button mat-raised-button color="warn" type="button" (click)="onCancel()">Annulla</button>
        </div>
    </form>
</mat-dialog-content>